\chapter{Testy}
\label{cha:testy}

W niniejszym rozdziale przedstawiono proces testowania oraz ich wyniki. Obszarem zainteresowań jest poprawność zaimplementowanego algorytmu oraz porównanie szybkości działania z~innymi implementacjami.

Do porównań opracowano dwie dodatkowe implementacje algorytmu zrealizowane z użyciem biblioteki OpenCV: jedna przeprowadza obliczenia na procesorze (CPU), druga przeprowadza obliczenia na karcie graficznej (GPU) z~wykorzystaniem pakietu CUDA.

\section{Testowanie poprawności}
\label{sec:testPoprawnosc}

Celem tej części testowania było sprawdzenie czy zrealizowane implementacje działają w~ten sam sposób. Proces testowania był następujący:

\begin{enumerate}
\item Przetworzenie tego samego obrazu za pomocą wszystkich implementacji. Wybrany obraz był reprezentowany w~kilku skalach. Przeprowadzono obliczenia dla każdej rozpoznawanej cechy.
\item Zestawienie obrazów wynikowych z~podziałem na cechy oraz skalę. Dla każdej cechy i~skali otrzymano trzy obrazy, po jednym dla każdej implementacji.
\item Porównanie wyników. Idealnym wynikiem byłoby otrzymanie trzech identycznych obrazów wynikowych. W praktyce jest to mało prawdopodobne, z~uwagi na różnice podczas zaokrąglenia obliczeń w~implementacjach.
\end{enumerate}

Dla każdej rozpoznawanej cechy oraz dla samego wyznaczania reprezentacji skali wybrano pięć obrazów. Obliczenia przeprowadzono dla dziesięciu skal przy kroku cztery. Spośród otrzymanych obrazów wybrano dwa najbardziej interesujące (dla każdej cechy i~dla reprezentacji skali) i~zaprezentowano w~części \ref{subsec:prezentacjaObrazowRoznicowych}.

Wszystkie obrazy wyjściowe zostały wykorzystane do analizy poprawności implementacji. W celu porównania wszystkich implementacji opracowano dwa współczynniki przedstawione we wzorach: \ref{eq:procentZlychPikseli} i~\ref{eq:sredniaOdchylenia}.

\begin{equation}
\label{eq:procentZlychPikseli}
p_{XY} = \frac{\sum_{i}^{N}|sgn(X_{ij}-Y_{ij})	|}{N}
\end{equation}
gdzie:

$ p_{XY} $ - współczynnik ilości różnych pikseli,

$ X, Y $ - obrazy, dla których wyznaczany jest współczynnik,

$ N $ - liczba pikseli w~obrazie,

$ sgn $ - funkcja signum \cite{Signum}.

\begin{equation}
\label{eq:sredniaOdchylenia}
v_{XY} = \frac{\sum_{i}^{N}|X_{ij}-Y_{ij}|}{\sum_{i}^{N}|sgn(X_{ij}-Y_{ij})|}
\end{equation}
gdzie:

$ v_{XY} $ - współczynnik wielkości średniego odchylenia,

$ X, Y $ - obrazy, dla których wyznaczany jest współczynnik,

$ N $ - liczba pikseli w~obrazie,

$ sgn $ - funkcja signum \cite{Signum}.

Współczynnik ilości różnych pikseli pokazuje ile różnych pikseli, w~stosunku do całego obrazu, jest obecnych dla dwóch różnych implementacji. Współczynnik wielkości średniego odchylenia jest wykorzystywany tylko dla obrazów reprezentacji skali, ponieważ obrazy wyjściowe dla wyznaczania cech są binarne. Współczynnik są wyliczane dla jednego obrazu w~jednej skali dla wszystkich trzech implementacji (porównywany jest wynik każdej implementacji z~każdą).

\subsection{Prezentacja różnych w~obrazach wyjściowych}
\label{subsec:prezentacjaObrazowRoznicowych}

\subsubsection{Reprezentacja skali}
\label{subsubsec:reprezentacjaSkaliRysunki}

\subsubsection{Plamy}
\label{subsubsec:plamyRysunki}

\subsubsection{Krawędzie}
\label{subsubsec:krawedzieRysunki}

\subsubsection{Narożniki}
\label{subsubsec:naroznikiRysunki}

\subsubsection{Granie}
\label{subsubsec:granieRysunki}
% rysunki

\subsection{Porówanie}
\label{subsec:prezentacjaObrazowRoznicowych}

% tabele

\section{Testowanie szybkości działania}
\label{sec:testSzybkosc1}

Testowanie szybkości działania oparto na porównaniu szybkości działania wszystkich implementacji algorytmu Scale Space. Liczony był czas działania algorytmu. Im krótszy czas tym lepsza implementacja algorytmu Scale Space.

Mierzeniu podlagał czas trwania następujących czynności:
\begin{itemize}
\item czas wyzaczania reprezentacji Scale Space,
\item czas wkrywania cech na obrazach (wraz z~wcześniejszym wyznaczeniem reprezentacji Scale Space) - osobno dla każdej cechy.
\end{itemize}

Do testów użyto różnych kart graficznych.
\begin{enumerate}
\item GeForce GT 555M \cite{GT555M} o następujących parametrach:
\begin{itemize}
\item libcza rdzeni: 144,
\item zegar układu graficznego: 675 MHz,
\item zegar procesora: 1350 MHz,
\item częstotliwość danych pamięci: 1800 MHz,
\item interfejs pamięci: 128-bitowy,
\item szerokość pasma pamięci: 28,80GB/s,
\item dostępna pamięć: 4095 MB.
\end{itemize}
\item druga karta z laboratorium.
\end{enumerate}

%opis maszyn, na których były wykonane testy

\section{Podsumowanie testów}
\label{sec:testPodsumowanie}

%podsumowanie testów
