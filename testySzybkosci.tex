\section{Testowanie szybkości działania}
\label{sec:testSzybkosci}

Testowanie szybkości działania oparto na porównaniu szybkości działania wszystkich implementacji algorytmu Scale Space. Liczony był czas działania algorytmu. Im krótszy czas tym lepsza implementacja algorytmu Scale Space.

Mierzeniu podlagał czas trwania następujących czynności:
\begin{itemize}
\item czas wyzaczania reprezentacji Scale Space,
\item czas wkrywania cech na obrazach (wraz z~wcześniejszym wyznaczeniem reprezentacji Scale Space) - osobno dla każdej cechy.
\end{itemize}

Testy zostały zrealizowane na obu przedstawionych wcześniej kartach graficznych. Do testów użyto dwudziestu obrazów pobranych z~kamery. Wykonano pomiary dla każdej z~implementacji dla wyznaczania reprezentacji skali i~detekcji każdej z~cech. Obliczenia zrealizowano dla dziesięciu skal z~krokiem 4. Wyniki pomiarów dla wyznaczania reprezentacji skali przedstawiono na diagramach.

\begin{figure}[h]
\begin{center}
\includegraphics[width=\textwidth]{TestySzybkosci/PureMoje.png}
\end{center}
\caption{Wykres szybkości działania z~użyciem karty graficznej GeForce GT 555M}
\label{fig:pureSzybkoscMoje}
\end{figure}

\begin{figure}[h]
\begin{center}
\includegraphics[width=\textwidth]{TestySzybkosci/PureAGH.png}
\end{center}
\caption{Wykres szybkości działania z~użyciem karty graficznej GeForce GTX 670}
\label{fig:pureSzybkoscAGH}
\end{figure}

Na wykresie \ref{fig:pureSzybkoscMoje} przedstawiono porównanie wyników dla poszczególnych skal dla obliczeń wykonanych na kracie graficznej GeForce GT 555M. Można zauważyć, że dla skal jeden, dwa oraz sześć szybkość obu implementacje jest prawie taka sama. Dla skal od trzeciej do piątej implementacja zrealizowana w~OpenCL jest wyraźnie szybsza. Dla skal większych od sześciu implmentacje zrealizowane w~OpenCV są szybsze.

Obie implementacje zrealizowane w~OpenCV (wykonywane na procesorze CPU i~procesorze GPU) dają prawie identczne wyniki. Dodatkowo można zauważyć że czas wykonywania obliczeń dla tych implementacji od trzeciej skali rośnie bardzo wolno wrast ze wzrostem skali.

Dla implementacji zrealizowanej w~OpenCL można zauważyć, że czas potrzebny do wykonania obliczeń rośnie wraz ze~wrostem skali. Wrost jest tym większy im większa jest skala.

Na wykresie \ref{fig:pureSzybkoscAGH} przedstawiono porównanie wyników dla poszczególnych skal dla obliczeń wykonanych na kracie graficznej GeForce GTX 670. Można zauważyć, że dla wszystkich skal poza pierwszą implementacja wykonana w~OpenCL jest wyraźnie szybsza.

Obie implementacje zrealizowane w~OpenCV (wykonywane na procesorze CPU i~procesorze GPU) dają porównywalne wyniki. Zawsze szybsza jest implementacja wykonywna na procesorze graficznym GPU. Można zauważyć wyraźny wzrost czasu trwania wykonywania pomiędzy drugą i~trzecią skalą. Dla większych skal wzrost jest mniejszy. 

Dla implmenentacji zrealizowanej w~OpenCL czas potrzebny na wykonanie obliczeń rośnie wraz ze wzrostem skali. 

\begin{figure}[h]
\begin{center}
\includegraphics[width=\textwidth]{TestySzybkosci/PureOpenCL.png}
\end{center}
\caption{Wykres szybkości działania z~użyciem karty graficznej GeForce GTX 670}
\label{fig:pureOpenCL}
\end{figure}

Na wykresie \ref{fig:pureOpenCL} przedstawiono porównanie szybkości działania implementacji wykonanej za pomocą biblioteki OpenCL dla obu kart graficznych. Można zauważyć znaczne różnice szybkości dla obu kart. Są one spowodowane wydajnością obu kart. Karta GeForce 555M jest kartą stworzoną dla laptopów (co , stworzoną kilka lat temu. Karta GeForce 670 jest kartą nowszej generacji, ma lepsze parametry. To powoduje znacznie szybsze wykonanie algorytmu na karcie GTX 670. Parametrem mocno wpływającym na szybkość wykonania algorytmu, zwłaszcza dla większych skal, jest wielkość pamięci wewnętrznej dla poszczególnych jednostek obliczneniowych karty graficznej. W~przypadku gdy fragment przetwarzanego obrazu jest mniejszy niż aktualnie przetwarzana skali znacznie zwiększa się czas przetwarzania.
